resources:
  - ../../base/istory-app
  - ../../base/istory-db

namespace: istory-dev

patches:
  - path: patch-lb-annotations.yaml
    target:
      kind: Service
      name: istory-app-lb
  - path: patch-deploy.yaml
    target:
      kind: Deployment
      name: istory-app-deploy

commonLabels:
  environment: development
  app: istory

images:
  - name: dangtong76/istory
    newTag: ${{ env.DOCKER_TAG }}

secretGenerator:
  - name: istory-app-secret
    envs:
      - .env.secret # MYSQL_USER, MYSQL_PASSWORD from Github Action Secrets

generatorOptions:
  disableNameSuffixHash: true